# 背景
文件名：2025-11-22_9
创建于：2025-11-22_12:15:00
创建者：胖虎
主分支：master
任务分支：task/fix-double-generation_2025-11-22_9
Yolo模式：Off

# 任务描述
修复结果页生成两张 AI 图片（闪烁）的 Bug。原因是 `useEffect` 在 React Strict Mode 下执行两次，导致 API 被调用两次，状态发生跳变。

# 项目概览
AI Polaroid Web App.

⚠️ 警告：永远不要修改此部分 ⚠️
[核心RIPER-5协议规则摘要]
... (同上)
⚠️ 警告：永远不要修改此部分 ⚠️

# 分析
-   **原因**：React 18+ Strict Mode 双重挂载。
-   **修复**：使用 `useRef` (`hasFetched`) 锁定第一次调用。

# 提议的解决方案
(已实施)

# 当前执行步骤："2. 最终审查"

# 任务进度
[2025-11-22_12:15:00]
- 行动：创建任务文件
- 状态：成功

[2025-11-22_12:18:00]
- 行动：修改 `src/app/result/page.tsx`
- 变更：添加 `hasFetched` ref 锁，防止 `useEffect` 重复执行。
- 状态：成功

# 最终审查
Bug 已修复。现在生成过程只会触发一次，不会再出现“图片闪现消失后又出第二张”的问题。
